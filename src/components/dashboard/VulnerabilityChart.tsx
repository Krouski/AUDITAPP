import React from 'react';
import { Card, Title, DonutChart } from '@tremor/react';
import { Vulnerability } from '../../types';

interface VulnerabilityChartProps {
  vulnerabilities: Vulnerability[];
}

export default function VulnerabilityChart({ vulnerabilities }: VulnerabilityChartProps) {
  const severityCount = vulnerabilities.reduce((acc, curr) => {
    acc[curr.severity] = (acc[curr.severity] || 0) + 1;
    return acc;
  }, {} as Record<string, number>);

  const chartData = Object.entries(severityCount).map(([name, value]) => ({
    name,
    value,
  }));

  return (
    <Card>
      <Title>Vulnerabilities by Severity</Title>
      <DonutChart
        data={chartData}
        category="value"
        index="name"
        colors={['red', 'orange', 'yellow', 'green']}
        className="mt-6"
      />
    </Card>
  );
}